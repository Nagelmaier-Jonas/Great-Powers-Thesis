@using Domain.Services
@inject DockerService DockerService
@inject NavigationManager NavigationManager

@foreach (var container in DockerContainers){
    <MudCard Outlined="true">
        <MudCardContent>
            <MudText>@container</MudText>
        </MudCardContent>
        <MudCardActions>
            <MudButton OnClick="@(() => LoadSession(container, "127.0.0.1", "26281"))">Load</MudButton>
        </MudCardActions>
    </MudCard>
}

@code {

    [Parameter]
    public List<string> DockerContainers { get; set; }

    private async void LoadSession(string name, string ipAddress, string port){
        await DockerService.StartDockerContainer(name);
        while (!DockerService.CheckConnection($"{ipAddress}", port)){
        }
        await DockerService.ChangeDbContext($"{ipAddress}", port);
        NavigationManager.NavigateTo("/game");
    }

}